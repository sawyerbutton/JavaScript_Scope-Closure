# 认知JavaScript  

作用域和闭包(Scope and Closure)

---

### 作用域

- 什么是作用域？
- 语言的最基础模型之一就是在变量中存储值，并且在稍后取出或修改这些值的能力
- 在变量中存储值和取出值的能力，给程序赋予状态这一概念
- 引入变量之后，这些变量存活在哪里？
- 这些问题需要一组明确定义的规则，它定义如何在某些位置存储变量，以及如何在稍后找到这些变量。AKA：作用域

---
### 理解作用域
- 登场演员
- 引擎：负责从始至终的编译和执行我们的 JavaScript 程序
- 编译器：引擎 的朋友之一；处理所有的解析和代码生成的苦活累活
- 作用域：引擎 的另一个朋友；收集并维护一张所有被声明的标识符（变量）的列表，并对当前执行中的代码如何访问这些变量强制实施一组严格的规则。

---
### What happen for "var a = 2";

- 遇到 var a，编译器 让 作用域 去查看对于这个特定的作用域集合，变量 a 是否已经存在了。如果是，编译器 就忽略这个声明并继续前进。否则，编译器 就让 作用域 去为这个作用域集合声明一个称为 a 的新变量
- 然后 编译器 为 引擎 生成稍后要执行的代码，来处理赋值 a = 2。引擎 运行的代码首先让 作用域 去查看在当前的作用域集合中是否有一个称为 a 的变量可以访问。如果有，引擎 就使用这个变量。如果没有，引擎 就查看 其他地方（参见下面的嵌套 作用域 一节）。
- 如果 引擎 最终找到一个变量，它就将值 2 赋予它。如果没有，引擎 将会举起它的手并喊出一个错误！  
- 总结: 对于一个变量赋值，发生了两个不同的动作：第一，编译器 声明一个变量（如果先前没有在当前作用域中声明过），第二，当执行时，引擎 在 作用域 中查询这个变量并给它赋值，如果找到的话

